<!DOCTYPE html>
<html lang="pt-br">

<head>
  <link rel="stylesheet" href="form.css">
  <header>
    <nav>
      <p>TRIPS</p>
      <ul>
        <li><a href="Site.html">HOME</a></li>
        <li><a href="#pacotes">PACOTES</a></li>
        <li><a href="#servicos">SERVIÇOS</a></li>
        <li><a href="#contato">CONTATOS</a></li>

        <li><a href="#" data-bs-toggle="dropdown" id="navDrop">CONTA</a>
          <!--<div class="dropdown-menu">
                        <a class="dropdown-item" href="#">Login</a>
                        <a class="dropdown-item" href="#">Cadastrar-se</a>
                    </div>-->
        </li>
      </ul>
    </nav>
    <meta charset="utf-8">
    <title>Formulário de checkout</title>
</head>

<body>
  <h1>Finalizar compra</h1>
  <form action="url_para_enviar_dados_do_formulario" method="post">
    <fieldset>
      <h2>Você está quase lá, agora só falta preencher suas informações!</h2>


      <button class="B" id="buscarBtn">Buscar Dados do Banco de Dados</button>


      <button id="deletarBtn" type="button">Deletar Registro</button>

      <form action="url_para_enviar_dados_do_formulario" method="post">
        <!-- Restante do seu código HTML -->
        <div class="input">
          <label for="nome">Nome: <span>*</span></label>
          <input type="text" name="nome" id="nome" required>
        </div>
        <div class="input-simples">
          <div>
            <label for="nascimento">Nascimento: <span>*</span></label>
            <input type="text" name="nascimento" id="nascimento" required>
          </div>
          <div>
            <label for="cpf">CPF: <span>*</span></label>
            <input type="text" name="cpf" id="cpf" required>
          </div>
          <div>
            <label for="telefone">Telefone: <span>*</span></label>
            <input type="text" name="telefone" id="telefone" required>
          </div>
          <div>
            <label for="e-mail">E-mail: <span>*</span></label>
            <input type="text" name="e-mail" id="e-mail" required>
          </div>
        </div>
      </form>

      <script>
        document.addEventListener("DOMContentLoaded", function () {
          function buscarDadosDoBancoDeDados() {
            const id = 1; // ID do registro a ser buscado
      
            // Realize a chamada ao backend para buscar os dados do registro com o ID especificado
            // Utilize a biblioteca Axios ou o Fetch API para fazer a requisição AJAX
            fetch(`http://localhost:8090/api/Cliente/${id}`)
              .then(response => response.json())
              .then(data => {
                // Verifique se os dados foram encontrados
                if (data) {
                  // Preencha os campos do formulário com os dados do registro retornado
                  document.getElementById('nome').value = data.Nome;
                  document.getElementById('nascimento').value = data.dataNasc;
                  document.getElementById('cpf').value = data.CPF;
                  document.getElementById('telefone').value = data.Telefone;
                  document.getElementById('e-mail').value = data.Email;
                } else {
                  alert("Dados não encontrados no banco de dados.");
                }
              })
              .catch(error => {
                console.error("Erro na requisição:", error);
                alert("Ocorreu um erro na requisição. Por favor, tente novamente mais tarde.");
              });
          }
      
          function deletarRegistro() {
            const id = 1; // ID do registro a ser deletado
      
            // Realize a chamada ao backend para deletar o registro com o ID especificado
            // Utilize a biblioteca Axios ou o Fetch API para fazer a requisição AJAX
            fetch(`http://localhost:8090/api/Cliente/${id}`, {
              method: 'DELETE'
            })
              .then(response => response.json())
              .then(data => {
                // Verifique se o registro foi deletado com sucesso
                if (data.success) {
               
                  // Limpe os campos do formulário
                  document.getElementById('nome').value = '';
                  document.getElementById('nascimento').value = '';
                  document.getElementById('cpf').value = '';
                  document.getElementById('telefone').value = '';
                  document.getElementById('e-mail').value = '';
                } else {
                  alert("Registro deletado com sucesso!");
                }
              })
              .catch(error => {
                console.error("Erro na requisição:", error);
                alert("Ocorreu um erro na requisição. Por favor, tente novamente mais tarde.");
              });
          }
      
          // Evento de clique no botão "Buscar Dados do Banco de Dados"
          document.getElementById('buscarBtn').addEventListener('click', buscarDadosDoBancoDeDados);
          document.getElementById('deletarBtn').addEventListener('click', deletarRegistro);
        });
      </script>
      


      <script>
        // Obter o número de pessoas da URL
        var queryString = window.location.search;
        var urlParams = new URLSearchParams(queryString);
        var numPessoas = urlParams.get('numPessoas');

        // Repetir campos de dados do passageiro de acordo com o número de pessoas
        for (var i = 1; i <= numPessoas; i++) {
          document.write('<h3>Dados do passageiro ' + i + '</h3>');
          document.write('<div class="input-duplo">');
          document.write('<div>');
          document.write('<label for="nome-passageiro">Nome: <span>*</span></label>');
          document.write('<input type="text" name="nome-passageiro" id="nome-passageiro" required>');
          document.write('</div>');
          document.write('<div>');
          document.write('<label for="sobrenome-passageiro">Sobrenome completo: <span>*</span></label>');
          document.write('<input type="text" name="sobrenome-passageiro" id="sobrenome-passageiro" required>');
          document.write('</div>');
          document.write('</div>');
          document.write('<div class="input-simples">');
          document.write('<div>');
          document.write('<label for="nascimento-passageiro">Nascimento: <span>*</span></label>');
          document.write('<input type="text" name="nascimento-passageiro" id="nascimento-passageiro" required>');
          document.write('</div>');
          document.write('<div>');
          document.write('<label for="email-passageiro">E-mail: <span>*</span></label>');
          document.write('<input type="text" name="email-passageiro" id="email-passageiro" required>');
          document.write('</div>');
          document.write('<div>');
          document.write('<label for="telefone-passageiro">Telefone: <span>*</span></label>');
          document.write('<input type="text" name="telefone-passageiro" id="telefone-passageiro" required>');
          document.write('</div>');
          document.write('</div>');
          document.write('<div class="input-duplo">');
          document.write('<div>');
          document.write('<label for="cpf-passageiro">CPF: <span>*</span></label>');
          document.write('<input type="text" name="cpf-passageiro" id="cpf-passageiro" required>');
          document.write('</div>');
          document.write('</div>');
        }
      </script>



    </fieldset>
  </form>

  <a href="formadepagamento.html"><button type="submit">Cadastrar</button></a>
</body>

</html>